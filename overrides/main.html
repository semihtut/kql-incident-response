{% extends "base.html" %}

{% block styles %}
  <style>html{background:#0d1117}</style>
  {{ super() }}
{% endblock %}

{% block announce %}
  <span style="display:flex;align-items:center;justify-content:center;gap:1rem;flex-wrap:wrap;font-size:0.8rem;">
    <span>
      <code style="font-size:0.7rem;padding:0.15rem 0.4rem;border-radius:4px;background:rgba(122,162,247,0.12);color:#7aa2f7;border:1px solid rgba(122,162,247,0.2);">v1.0</code>
      &nbsp;RB-0001 Unfamiliar Sign-In Properties &mdash;
      <a href="{{ 'runbooks/identity/unfamiliar-sign-in-properties/' | url }}">Read the runbook &rarr;</a>
    </span>
    <a href="https://github.com/semihtut/kql-incident-response" style="display:inline-flex;align-items:center;gap:0.3rem;text-decoration:none;opacity:0.7;">
      <img src="https://img.shields.io/github/stars/semihtut/kql-incident-response?style=flat&logo=github&logoColor=e6edf3&labelColor=0d1117&color=30363d" alt="GitHub stars" height="18" loading="lazy">
    </a>
  </span>
{% endblock %}

{% block content %}
  {% if page and page.is_homepage %}
    {# No back button on homepage #}
  {% elif page and page.meta and page.meta.id is defined and page.meta.id is string and page.meta.id[:3] == 'RB-' %}
  <nav class="runbook-back-nav" aria-label="Back navigation">
    <a href="{{ 'runbooks/gallery/' | url }}" class="back-to-gallery">
      <span class="back-arrow">&larr;</span>
      <span>Back to Runbook Gallery</span>
    </a>
  </nav>
  <!-- Investigation Progress Bar -->
  <div class="kql-progress-bar" id="kql-progress-bar" role="navigation" aria-label="Investigation progress">
    <div class="kql-progress-track">
      <div class="kql-progress-fill" id="kql-progress-fill"></div>
    </div>
    <div class="kql-progress-phases">
      <button class="kql-progress-phase active" data-phase="triage">
        <span class="kql-phase-dot"></span>
        <span class="kql-phase-label">Triage</span>
      </button>
      <button class="kql-progress-phase" data-phase="investigation">
        <span class="kql-phase-dot"></span>
        <span class="kql-phase-label">Investigation</span>
      </button>
      <button class="kql-progress-phase" data-phase="containment">
        <span class="kql-phase-dot"></span>
        <span class="kql-phase-label">Containment</span>
      </button>
      <button class="kql-progress-phase" data-phase="evidence">
        <span class="kql-phase-dot"></span>
        <span class="kql-phase-label">Evidence</span>
      </button>
    </div>
  </div>
  {% elif page and page.url and page.url != '' %}
  <nav class="runbook-back-nav" aria-label="Back navigation">
    <a href="{{ '' | url }}" class="back-to-gallery">
      <span class="back-arrow">&larr;</span>
      <span>Back to Home</span>
    </a>
  </nav>
  {% endif %}
  {{ super() }}
{% endblock %}
